***Extracting transects from 2D bathymetry data
auto_transects
resample_polyline
auto_transects_helper_functions
get_narivs_centerlines

***Codes_07272018
sb_functions
sb_reach_mc
sb_reach_mc_old
mc_sb
sb_07262018

***Codes_SB
misc_07292018
sb_reach
plot_WSEw
sb_07262018
mc_sb
sb_functions
generalized_sb_07240218
sb_method_batch
msb_batch
generalized_sb_07232018
linear_method_batch
sb_single

***Workflow1 (old)
auto_transects
fit_cross_sections_w_plotting
nice_cross_sections
fit_shape
test_case
find_centerlines
fitting_sections_functions
auto_transects_helper_functions
resample_polyline

nice_cross_sections
generalized_slope_break
fit_nls2
cross_sections_post_analysis


====main====
Based on sb_reach_mc, but all-inclusive

Use monte carlo approach and slope break method to estimate z0 many times for reaches at different exposure levels. Report z0 estimates, plot histograms, calculate bias and variance and plot them vs. exposure.


====r package====

Functionality:

/Create main channel centerlines from river data
/Generate cross sections from bathymetry data
Generate WSE-w relationships
Identify linear breakpoints
Identify nonlinear breakpoints
Identify the lowest linear breakpoint
Observe WSE-w relationships from minimum width (100m) to maximum width, going in 50 m (resolution) increments
Fit linear model to observed WSE-w relationship at varying exposure levels and estimate bottom depth
Repeat for slope break model using the most prominent single slope break using breakpoints and/or sctest
Repeat for slope break model using the lowest observed slope break
Repeat for slope break model using slope break using Mersel's method, see how enforcing continuity affects the predictions
Repeat for nonlinear model
Repeat for nonlinear slope break model
For each modeled cross section, estimate the flow area and wetted perimeter.
For each true cross section estimate the flow area and wetted perimeter
Characterize the shape, symmetry, and number of channels of each cross section. See cross_sections_post_analysis
Plot downstream bed elevation vs. predicted bed elevation
Plot true vs. predicted bottom elevations with 1-1 line.

Functions:

hydraulic_parameters - calculates A, WP given true or modeled cross section. See hydraulic_parameters.R

fit_shape - fits shape parameter to a cross section, given WSE-w data, makes plots. See fit_shape.R

wsew_from_xs - gets WSE-w relationship from cross section geometry, saves it, along with wbf, dbf, b.min. See generalized_slope_break.R, sb_reach, sb_functions.R

rwsew_from_wsew - gets reach-average WSE-w relationship for each cross section, saves it, along with wbf, dbf, b.min. See sb_reach.R, sb_functions.R

get_width - estimates flow width for a given WSE measurement, knowing the WSE-w relationship from measured data. See gen_slope_break_functions, sb_functions.R

get_depth - estimates WSE for a given flow width measurement, knowing the WSE-w relationship from measured data.

fit_linear_spline - fits a linear spline to measured channel geometry. See generalized_slope_break.R

get_swot_meas - samples the WSE-w relationship to get synethtic SWOT measurements of WSE and w. Goes in increments of 50 m for width, with min w = 100m

add_error - adds random error to swot measurements. See sb_mc.R

count_channels - counts the number of channels in the cross sections. Returns the cross sections with one channel. See nice_cross_sections.R

symmetric_xs - counts the number of symmetric cross sections. Returns the symmetric cross sections. See nice_cross_sections.R

cross_sections - saves cross section geometry for all cross sections, based on output from auto_transects.R. See sb_reach. 

plot_fits - plots true WSE-w data, fitted model, etc. for linear, slope break, nonlinear, or nlsb method. See generalized_sb_07232018.R

fit_wsew_mersel - fits WSE-w relationship using Mersel linear or slope break method. Returns null if cross section is not suitable for the method. See linear_method_batch.R, main_mersel.R.

main - script for running other codes. See main. Potentially do MC simulation in this code, as opposed to burying it in the mc_sb, etc. codes.

plot_true_vs_pred - plot true vs. predicted z0 values for all cross sections. See misc_07292018.R

plot_wsew - plots all WSE-w relationships on one plot. See main.R, plot_WSEw.R

check_below_sb - checks whether the behavior of the points below the slope break is linear, according to some threshold on maxdiff, SSE, or R2. see sb_functions.R.


